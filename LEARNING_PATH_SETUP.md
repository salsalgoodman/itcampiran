# راهنمای راه‌اندازی مسیر یادگیری (Learning Path Setup)

## مراحل راه‌اندازی

### 1. راه‌اندازی دیتابیس

در Supabase Dashboard → SQL Editor، فایل زیر را اجرا کنید:
```
supabase/migrations/20251201000000_learning_path_schema.sql
```

این فایل جداول زیر را ایجاد می‌کند:
- `lessons` - ذخیره محتوای درس‌ها
- `questions` - سوالات هر درس
- `user_progress` - پیشرفت کاربران
- `question_answers` - پاسخ‌های کاربران

### 2. پر کردن دیتابیس با درس‌ها

پس از ایجاد جداول، محتوای درس‌ها را اضافه کنید:

```bash
python populate_lessons.py
```

این اسکریپت:
- همه درس‌ها را از `lessons_content.py` می‌خواند
- آن‌ها را در دیتابیس ذخیره می‌کند
- سوالات هر درس را اضافه می‌کند

### 3. راه‌اندازی ربات

```bash
python workshop_signup_bot.py
```

## ساختار درس‌ها

### درس‌های رایگان (Free):
1. **مقدمه (Intro)**
   - درس 0: تفاوت PyCharm، Notepad و Jupyter Notebook + نصب

2. **انواع داده‌ها (Data Types)**
   - درس 1: Integer و String
   - درس 2: Float و Boolean
   - درس 3: تبدیل انواع داده

3. **عملگرها (Operators)**
   - درس 4: عملگرهای ریاضی
   - درس 5: عملگرهای مقایسه و انتساب
   - درس 6: Input و متغیرها
   - پروژه 1: ماشین حساب ساده

4. **توابع و شرط‌ها (Functions)**
   - درس 8: توابع تبدیل نوع
   - درس 9: شرط if و else
   - درس 10: Try و Except
   - درس 11: حلقه While
   - درس 12: حلقه For
   - درس 13: تعریف تابع - def
   - درس 14: Return در توابع
   - پروژه 2: بازی حدس عدد

5. **ساختارهای داده (Data Structures)**
   - درس 16: لیست - بخش 1
   - درس 17: لیست - بخش 2 (متدها)
   - درس 18: لیست - بخش 3 (map/filter/zip)
   - درس 19: Tuple
   - درس 20: Dictionary - بخش 1
   - درس 21: Dictionary - بخش 2 و Set
   - پروژه 3: مدیریت لیست دانشجویان

### درس‌های پولی (Paid):
- **متدها و کتابخانه‌ها (Methods and Libraries)**
- **نظریه یادگیری ماشین (ML Theory)**

## دستورات ربات

### برای کاربران:
- `/start` - شروع ثبت‌نام
- `/lessons` - مشاهده لیست همه درس‌ها
- `/next` - دریافت درس بعدی
- `/progress` - مشاهده پیشرفت

### برای ادمین‌ها:
- `/submissions` - مشاهده ثبت‌نام‌ها

## جریان کار

1. **ثبت‌نام کاربر:**
   - کاربر `/start` می‌زند
   - پلن را انتخاب می‌کند
   - پرداخت می‌کند
   - ثبت‌نام تأیید می‌شود

2. **شروع یادگیری:**
   - بعد از تأیید ثبت‌نام، اولین درس به صورت خودکار ارسال می‌شود
   - کاربر می‌تواند با `/next` درس بعدی را دریافت کند

3. **دسترسی:**
   - درس‌های رایگان برای همه کاربران ثبت‌نام شده قابل دسترسی است
   - درس‌های پولی فقط برای کاربران ثبت‌نام شده

## نکات مهم

1. **محتوای درس‌ها:**
   - همه درس‌ها در فایل `lessons_content.py` تعریف شده‌اند
   - برای اضافه کردن درس جدید، به این فایل اضافه کنید و دوباره `populate_lessons.py` را اجرا کنید

2. **ساختار هر درس:**
   - `lesson_number`: شماره درس
   - `title`: عنوان درس
   - `content`: لیست پیام‌های محتوا (می‌تواند چند پیام باشد)
   - `lesson_type`: نوع (lesson, project, intro)
   - `section`: بخش (intro, data_types, operators, ...)
   - `is_free`: رایگان یا پولی
   - `code_examples`: مثال‌های کد
   - `expected_outputs`: خروجی‌های مورد انتظار
   - `questions`: لیست سوالات

3. **پروژه‌ها:**
   - بعد از هر 3-4 درس، یک پروژه ترکیبی وجود دارد
   - پروژه‌ها در `lesson_type` به عنوان "project" مشخص شده‌اند

4. **سوالات:**
   - هر درس 3-4 سوال دارد
   - سوالات می‌توانند multiple_choice یا text باشند
   - پاسخ‌ها در جدول `question_answers` ذخیره می‌شوند

## عیب‌یابی

### مشکل: درس‌ها نمایش داده نمی‌شوند
- بررسی کنید که `populate_lessons.py` اجرا شده باشد
- بررسی کنید که جداول در Supabase ایجاد شده باشند

### مشکل: کاربر نمی‌تواند درس ببیند
- بررسی کنید که کاربر ثبت‌نام کرده و تأیید شده باشد
- بررسی کنید که `status` در جدول `users` برابر "confirmed" باشد

### مشکل: درس‌های پولی برای کاربران رایگان نمایش داده می‌شود
- بررسی کنید که `is_free` در جدول `lessons` به درستی تنظیم شده باشد
- بررسی کنید که تابع `check_user_access` به درستی کار می‌کند

## توسعه بیشتر

برای اضافه کردن درس‌های جدید:

1. درس را به `lessons_content.py` اضافه کنید
2. `populate_lessons.py` را اجرا کنید
3. درس جدید در ربات قابل دسترسی خواهد بود

برای اضافه کردن بخش‌های پولی (Methods and Libraries و ML Theory):
- درس‌ها را با `is_free: False` اضافه کنید
- فقط کاربران ثبت‌نام شده می‌توانند به آن‌ها دسترسی داشته باشند


