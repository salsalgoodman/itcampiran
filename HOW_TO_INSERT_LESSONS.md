# راهنمای اضافه کردن درس‌ها به دیتابیس

## مشکل اتصال
به دلیل مشکل DNS/اینترنت، نمی‌توانیم مستقیماً از Python به Supabase متصل شویم.

## راه‌حل: استفاده از فایل SQL

### مرحله 1: باز کردن Supabase Dashboard
1. به https://app.supabase.com بروید
2. وارد حساب خود شوید
3. پروژه خود را انتخاب کنید

### مرحله 2: باز کردن SQL Editor
1. در منوی سمت چپ، روی **SQL Editor** کلیک کنید
2. روی دکمه **New query** کلیک کنید

### مرحله 3: کپی کردن فایل SQL
1. فایل `insert_lessons.sql` را در ویرایشگر خود باز کنید
2. تمام محتوا را انتخاب کنید (Ctrl+A)
3. کپی کنید (Ctrl+C)

### مرحله 4: Paste و اجرا
1. در SQL Editor، محتوا را Paste کنید (Ctrl+V)
2. روی دکمه **Run** (یا F5) کلیک کنید
3. منتظر بمانید تا اجرا شود (چند ثانیه طول می‌کشد)

### مرحله 5: بررسی نتیجه
بعد از اجرا، باید پیام موفقیت را ببینید. برای بررسی:
```sql
SELECT COUNT(*) FROM lessons;  -- باید 23 باشد
SELECT COUNT(*) FROM questions;  -- باید تعداد سوالات باشد
```

## مزایای این روش
- ✅ همه درس‌ها و سوالات به صورت خودکار اضافه می‌شوند
- ✅ نیازی به اضافه کردن دستی نیست
- ✅ از ON CONFLICT استفاده می‌کند - اگر قبلاً اضافه شده باشد، به‌روزرسانی می‌شود
- ✅ در یک تراکنش اجرا می‌شود - یا همه اضافه می‌شوند یا هیچکدام

## فایل SQL
فایل `insert_lessons.sql` شامل:
- 23 درس کامل
- همه سوالات هر درس
- مثال‌های کد
- خروجی‌های مورد انتظار

## بعد از اضافه کردن
بعد از اجرای SQL:
1. ربات را راه‌اندازی کنید: `python workshop_signup_bot.py`
2. کاربران می‌توانند از دستورات زیر استفاده کنند:
   - `/lessons` - لیست درس‌ها
   - `/next` - درس بعدی
   - `/progress` - پیشرفت

## مشکل دارید؟
اگر خطایی دیدید:
1. مطمئن شوید جداول ایجاد شده‌اند (از migration قبلی)
2. بررسی کنید که فایل SQL کامل کپی شده باشد
3. خطای SQL را بررسی کنید


